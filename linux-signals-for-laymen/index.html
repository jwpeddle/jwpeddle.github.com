<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset='utf-8'>
    <title>Typh.com</title>
    <link href='/assets/lib/bootstrap/bootstrap.min.css' rel='stylesheet'>
    <link href='/assets/css/base.css' rel='stylesheet'>
  </head>

  <body>

    <div class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container'>
          <a class='brand' href='/'>Typh.com</a>
        </div>
      </div>
    </div>

    <div class='container'>
      
  <h1><a href="/linux-signals-for-laymen/">Linux Signals for Laymen</a></h1>
  <h2>Saturday, March 03, 2012</h2>
  <p>SIGKILL, SIGTERM, SIGHUP, SIGINT. These terms might be second nature to<br>
seasoned *nix veterans, but if you&#39;re a casual Linux user like me,<br>
these might look scary robot language words. Turns out they&#39;re actually<br>
a pretty simple concept, and you probably use them all the time without<br>
even knowing it.</p>

<p>I&#39;m sure most terminal-savvy Linux users have had to use <code>ps | grep</code> to<br>
find an uppity process, then <code>kill</code> to shut it down it. Oh, and if it<br>
that doesn&#39;t work, there&#39;s the super duper method, <code>kill -9</code>. I assumed<br>
that meant &quot;kill this 9 deaths at once&quot;. I wasn&#39;t far off, but kill is<br>
more of a message delivery systemâ€” not the aggressive killbot its name<br>
might imply.</p>

<p>You see, when you fire up a Linux process, even if there&#39;s no GUI to<br>
interact with, you can still talk to it. For example, let&#39;s say you have<br>
Apache running in the background and you want to shut it down. One<br>
common way to do this is by calling <code>apache2ctl stop</code>. But what does<br>
that actually do? How does this new process make another unrelated<br>
process shutdown? How is it different from how nginx shuts down, or<br>
mysql? Or even <code>tail -f</code>? Turns out, they all essentially shut down the<br>
same way. They receive <em>signals</em>.</p>

<p>According to the <a href="http://httpd.apache.org/docs/2.0/stopping.html">Apache docs</a>, calling<br>
<code>apache2ctl stop</code> uses the signal <strong>TERM</strong> (terminate). Basically,<br>
apache2ctl sends a message to apache saying &quot;terminate!&quot; and apache<br>
responds to this message by shutting itself down.</p>

<p>To restart apache with <code>apache2ctl restart</code>, you&#39;re sending the <strong>HUP</strong><br>
signal. HUP stands for &quot;hang up&quot;, but this metaphor is not really<br>
relevant anymore. Usually it means &quot;reread your configuration files&quot;.<br>
apache2ctl has another type of restart with the <code>apache2ctl graceful</code><br>
command, which sends the signal <strong>USR1</strong>. This one doesn&#39;t have any<br>
inherent meaning. They likely chose it because none of the other signals<br>
seemed appropriate. In apache&#39;s case, they try to reload configuration<br>
files without killing anyone currently accessing the site. What a<br>
process does in response to a signal is up to the process (usually).<br>
Nginx uses the HUP signal too, for example, but it reacts more of like<br>
apache does when it receives USR1 - it restarts <em>gracefully</em>.</p>

<p>So what does this have to do with kill?\<br>
kill isn&#39;t just intended to violently end processes. It is used to send<br>
<em>all</em> signals in a simple, direct, way. Calling <code>kill apache</code> sends the<br>
TERM signal, just like <code>apache2ctl stop</code> does! And if is doesn&#39;t<br>
shutdown after that: <code>kill -9</code> sends the <strong>KILL</strong> signal, which also<br>
shuts down apache, but in a more aggressive way<del>- the apache process<br>
gets no say. It just immediately dies, end of story. Why</del>9? 9 is just<br>
an alias for KILL. Run <code>kill -l</code> and you&#39;ll see all the number aliases<br>
and signals that can be sent. kill can also just use the signals name<br>
directly. <code>kill</code> is the same as <code>kill -TERM</code>, which is the same as<br>
<code>kill -15</code>.</p>

<p>There are <a href="http://en.wikipedia.org/wiki/Signal_(computing">many signals</a>), most of which<br>
are some variation of &quot;shut down&quot;. Some only apply to programs running<br>
in a terminal: if you&#39;ve ever used <em>ctrl-c</em> to shutdown a process<br>
running in the terminal, you&#39;ve sent <strong>INT</strong> (interrupt) signal! Kinda<br>
like TERM, but only for the terminal. Likewise, if you press ctrl-z, you<br>
send <strong>TSTP</strong> (tty/terminal stop) which pauses your process in the<br>
background. You can confirm this by running <code>jobs</code>, then resume it again<br>
by running <code>fg</code>, which once again sends a signal: <strong>CONT</strong> (continue).<br>
This was especially enlightening to me because I thought ctrl-z was more<br>
akin to <code>kill -9</code>. I have to wonder how many processes I&#39;ve stuffed into<br>
the background of my terminals from misusing this shortcut.</p>

<p>I suspect this post is old hat to a lot of users, but I&#39;ve been using<br>
Linux for years and had no concept of signals. Reading up on it<br>
instantly made years of being confused by processes make sense. I can<br>
only hope some confused googler wanders past here and gets the same<br>
benefit.</p>


  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'typhdotcom'; // required: replace example with your forum shortname
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

    </div>

    <!-- scripts -->
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.1/underscore-min.js'></script>
    <script src='http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.1/bootstrap.min.js'></script>

    <!-- google analytics -->
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-29690588-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <!-- clicky analytics -->
    <script>
      var clicky_site_ids = clicky_site_ids || [];
      clicky_site_ids.push(66550860);
      (function() {
        var s = document.createElement('script');
        s.async = true;
        s.src = '//static.getclicky.com/js';
        ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
      })();
    </script>
    <noscript>
      <p>
        <img alt='' width='1' height='1' src='//in.getclicky.com/66550860ns.gif' />
      </p>
    </noscript>
  </body>
</html>